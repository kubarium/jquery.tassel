$.fn.tassel=function(t){"use strict";function s(){t.tassels.forEach(function(t,e,s){s[e]="".concat("url(",t,")")}),e.css({"background-image":t.tassels.join(","),"background-position":"top left, top right"+(3==t.tassels.length?", 0% 10%":""),"background-repeat":"no-repeat, no-repeat"+(3==t.tassels.length?", repeat-x":""),"background-clip":"padding-box, padding-box"+(3==t.tassels.length?", content-box":""),padding:"0 "+t.tasselWidth+"px",height:t.tasselHeight+"px",border:"0"}).addClass("tasselled"),parseInt(t.repetition,10)>0?e.width(t.repetition*t.repetitionWidth):-1===parseInt(t.repetition,10)&&e.width(i)}function i(){var s=e.parent().width()-2*t.tasselWidth,i=s%t.repetitionWidth;return s-i}if(t=$.extend({},t),!t.tassel_left||!t.tassel_right)return this.trigger(new Event("tasselConfigurationError"));t.tassels=[t.tassel_left,t.tassel_right],t.tassel_middle&&t.tassels.push(t.tassel_middle);var e=this;return this.each(function(){var i=0;$.each(t.tassels,function(r,a){$("<img/>").load(function(e){i++,0===r&&(t.tasselWidth=e.currentTarget.width,t.tasselHeight=e.currentTarget.height),2===r&&(t.repetitionWidth=e.currentTarget.width),i===t.tassels.length&&s(e)}).error(function(t){e.trigger({type:"tasselImageLoadError",tassel:0===r?"left":2===r?"middle":"right",path:t.currentTarget.src})}).attr("src",a)})})};
